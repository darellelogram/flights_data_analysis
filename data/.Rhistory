n/4
round(n, 0)
round(n/4,0)
n_25pct <- round(n/4,0)
write.csv(matrix_dest, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/OriginsByUtilization.csv")
df$Top25pct <- TRUE if df$tail_num %in% Top25pct_AA else FALSE
df <- data.frame(tail_num = character(),
sum_airtime = integer(),
num_flights = integer(),
airline = character(),
total_delay = integer(), # sum of arrival delay
stringsAsFactors = FALSE)
v <- unique(flights$tail_num)
for (i in 1:length(v)) {
sa <- sum(flights[flights$tail_num == v[i],"air_time"], na.rm = TRUE)
nf <- nrow(flights[flights$tail_num == v[i],])
al <- unique(na.omit(flights[flights$tail_num == v[i], "airline"]))[1]
td <- sum(flights[flights$tail_num == v[i], "arr_delay"], na.rm = TRUE)
df <- df %>% add_row(tail_num=v[i], sum_airtime = sa, num_flights = nf, airline = al, total_delay = td)
}
df$avg_airtime <- df[,"sum_airtime"] / df[,"num_flights"]
df$avg_delay <- df[,"total_delay"] / df[,"num_flights"]
df <- df[order(-df$sum_airtime),]
n_A_25pct <- round(nrow(df[df$airline == "AA",])/4,0)
n_B_25pct <- round(nrow(df[df$airline == "BA",])/4,0)
Top25pct_AA <- df[df$airline == "AA", "tail_num"][1:n_A_25pct]
Top25pct_BA <- df[df$airline == "BA", "tail_num"][1:n_B_25pct]
Bottom25pct_AA <- na.omit(df[df[order(df$sum_airtime),]$airline == "AA", "tail_num"])[1:n_A_25pct]
Bottom25pct_BA <- na.omit(df[df[order(df$sum_airtime),]$airline == "AA", "tail_num"])[1:n_B_25pct]
df$Top25pct_AA <- ifelse(df$tail_num %in% Top25pct_AA, TRUE, FALSE)
df$Top25pct_BA <- ifelse(df$tail_num %in% Top25pct_BA, TRUE, FALSE)
df$Bottom25pct_AA <- ifelse(df$tail_num %in% Bottom25pct_AA, TRUE, FALSE)
df$Bottom25pct_BA <- ifelse(df$tail_num %in% Bottom25pct_BA, TRUE, FALSE)
matrix <- as.matrix(df)
write.csv(matrix, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/TailNum_by_Utilization.csv")
n_A_25pct <- round(nrow(df[df$airline == "AA",])/4,0)
n_B_25pct <- round(nrow(df[df$airline == "BA",])/4,0)
Top25pct_AA <- df[df$airline == "AA", "tail_num"][1:n_A_25pct]
Top25pct_BA <- df[df$airline == "BA", "tail_num"][1:n_B_25pct]
Bottom25pct_AA <- na.omit(df[df[order(df$sum_airtime),]$airline == "AA", "tail_num"])[1:n_A_25pct]
Bottom25pct_BA <- na.omit(df[df[order(df$sum_airtime),]$airline == "BA", "tail_num"])[1:n_B_25pct]
df$Top25pct_AA <- ifelse(df$tail_num %in% Top25pct_AA, TRUE, FALSE)
df$Top25pct_BA <- ifelse(df$tail_num %in% Top25pct_BA, TRUE, FALSE)
df$Bottom25pct_AA <- ifelse(df$tail_num %in% Bottom25pct_AA, TRUE, FALSE)
df$Bottom25pct_BA <- ifelse(df$tail_num %in% Bottom25pct_BA, TRUE, FALSE)
matrix <- as.matrix(df)
write.csv(matrix, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/TailNum_by_Utilization.csv")
View(df)
Bottom25pct_AA
Bottom25pct_AA <- na.omit(df[df[order(df$sum_airtime) & df$airline=="AA",], "tail_num"])[1:n_A_25pct]
df_reverse <- df[order(na.omit(df$sum_airtime)),]
View(df_reverse)
View(df_reverse)
Bottom25pct_AA <- na.omit(df_reverse[df$airline=="AA", "tail_num"])[1:n_A_25pct]
Bottom25pct_AA
Bottom25pct_BA <- na.omit(df_reverse[df$airline=="BA", "tail_num"])[1:n_B_25pct]
df$Top25pct_AA <- ifelse(df$tail_num %in% Top25pct_AA, TRUE, FALSE)
df$Top25pct_BA <- ifelse(df$tail_num %in% Top25pct_BA, TRUE, FALSE)
df$Bottom25pct_AA <- ifelse(df$tail_num %in% Bottom25pct_AA, TRUE, FALSE)
df$Bottom25pct_BA <- ifelse(df$tail_num %in% Bottom25pct_BA, TRUE, FALSE)
matrix <- as.matrix(df)
write.csv(matrix, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/TailNum_by_Utilization.csv")
write.csv(matrix, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/TailNum_by_Utilization.csv")
df <- data.frame(tail_num = character(),
sum_airtime = integer(),
num_flights = integer(),
airline = character(),
total_delay = integer(), # sum of arrival delay
stringsAsFactors = FALSE)
v <- unique(flights$tail_num)
for (i in 1:length(v)) {
sa <- sum(flights[flights$tail_num == v[i],"air_time"], na.rm = TRUE)
nf <- nrow(flights[flights$tail_num == v[i],])
al <- unique(na.omit(flights[flights$tail_num == v[i], "airline"]))[1]
td <- sum(flights[flights$tail_num == v[i], "arr_delay"], na.rm = TRUE)
df <- df %>% add_row(tail_num=v[i], sum_airtime = sa, num_flights = nf, airline = al, total_delay = td)
}
df$avg_airtime <- df[,"sum_airtime"] / df[,"num_flights"]
df$avg_delay <- df[,"total_delay"] / df[,"num_flights"]
df <- df[order(-df$sum_airtime),]
n_A_25pct <- round(nrow(df[df$airline == "AA",])/4,0)
n_B_25pct <- round(nrow(df[df$airline == "BA",])/4,0)
Top25pct_AA <- df[df$airline == "AA", "tail_num"][1:n_A_25pct]
Top25pct_BA <- df[df$airline == "BA", "tail_num"][1:n_B_25pct]
df_reverse <- df[order(na.omit(df$sum_airtime)),]
Bottom25pct_AA <- na.omit(df_reverse[df$airline=="AA", "tail_num"])[1:n_A_25pct]
Bottom25pct_BA <- na.omit(df_reverse[df$airline=="BA", "tail_num"])[1:n_B_25pct]
#Bottom25pct_BA <- na.omit(df[df[order(df$sum_airtime),]$airline == "BA", "tail_num"])[1:n_B_25pct]
df$Top25pct_AA <- ifelse(df$tail_num %in% Top25pct_AA, TRUE, FALSE)
df$Top25pct_BA <- ifelse(df$tail_num %in% Top25pct_BA, TRUE, FALSE)
df$Bottom25pct_AA <- ifelse(df$tail_num %in% Bottom25pct_AA, TRUE, FALSE)
df$Bottom25pct_BA <- ifelse(df$tail_num %in% Bottom25pct_BA, TRUE, FALSE)
matrix <- as.matrix(df)
write.csv(matrix, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/TailNum_by_Utilization.csv")
n_A_25pct <- round(nrow(df[df$airline == "AA",])/4,0)
n_B_25pct <- round(nrow(df[df$airline == "BA",])/4,0)
Top25pct_AA <- df[df$airline == "AA", "tail_num"][1:n_A_25pct]
Top25pct_BA <- df[df$airline == "BA", "tail_num"][1:n_B_25pct]
df_reverse <- df[order(na.omit(df$sum_airtime)),]
Bottom25pct_AA <- na.omit(df_reverse[df_reverse$airline=="AA", "tail_num"])[1:n_A_25pct]
Bottom25pct_BA <- na.omit(df_reverse[df_reverse$airline=="BA", "tail_num"])[1:n_B_25pct]
#Bottom25pct_BA <- na.omit(df[df[order(df$sum_airtime),]$airline == "BA", "tail_num"])[1:n_B_25pct]
df$Top25pct_AA <- ifelse(df$tail_num %in% Top25pct_AA, TRUE, FALSE)
df$Top25pct_BA <- ifelse(df$tail_num %in% Top25pct_BA, TRUE, FALSE)
df$Bottom25pct_AA <- ifelse(df$tail_num %in% Bottom25pct_AA, TRUE, FALSE)
df$Bottom25pct_BA <- ifelse(df$tail_num %in% Bottom25pct_BA, TRUE, FALSE)
matrix <- as.matrix(df)
write.csv(matrix, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/TailNum_by_Utilization.csv")
View(flights)
df <- data.frame(tail_num = character(),
sum_airtime = integer(),
num_flights = integer(),
airline = character(),
total_delay = integer(), # sum of arrival delay
n_delays = integer(),
stringsAsFactors = FALSE)
v <- unique(flights$tail_num)
for (i in 1:length(v)) {
sa <- sum(flights[flights$tail_num == v[i],"air_time"], na.rm = TRUE)
nf <- nrow(flights[flights$tail_num == v[i],])
al <- unique(na.omit(flights[flights$tail_num == v[i], "airline"]))[1]
td <- sum(flights[flights$tail_num == v[i], "arr_delay"], na.rm = TRUE)
nd <- nrow(flights[flights$tail_num == v[i] & flights$arr_delay > 0,])
df <- df %>% add_row(tail_num=v[i], sum_airtime = sa, num_flights = nf, airline = al, total_delay = td, n_delays = nd)
}
df$avg_airtime <- df[,"sum_airtime"] / df[,"num_flights"]
df$avg_delay <- df[,"total_delay"] / df[,"num_flights"]
df$pct_delay <- df[,"n_delays"] / df[,"num_flights"]
df <- df[order(-df$sum_airtime),]
n_A_25pct <- round(nrow(df[df$airline == "AA",])/4,0)
n_B_25pct <- round(nrow(df[df$airline == "BA",])/4,0)
Top25pct_AA <- df[df$airline == "AA", "tail_num"][1:n_A_25pct]
Top25pct_BA <- df[df$airline == "BA", "tail_num"][1:n_B_25pct]
df_reverse <- df[order(na.omit(df$sum_airtime)),]
Bottom25pct_AA <- na.omit(df_reverse[df_reverse$airline=="AA", "tail_num"])[1:n_A_25pct]
Bottom25pct_BA <- na.omit(df_reverse[df_reverse$airline=="BA", "tail_num"])[1:n_B_25pct]
#Bottom25pct_BA <- na.omit(df[df[order(df$sum_airtime),]$airline == "BA", "tail_num"])[1:n_B_25pct]
df$Top25pct_AA <- ifelse(df$tail_num %in% Top25pct_AA, TRUE, FALSE)
df$Top25pct_BA <- ifelse(df$tail_num %in% Top25pct_BA, TRUE, FALSE)
df$Bottom25pct_AA <- ifelse(df$tail_num %in% Bottom25pct_AA, TRUE, FALSE)
df$Bottom25pct_BA <- ifelse(df$tail_num %in% Bottom25pct_BA, TRUE, FALSE)
matrix <- as.matrix(df)
write.csv(matrix, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/TailNum_by_Utilization.csv")
nrow(df[df$airline=="BA",])
nrow(df[df$airline=="AA",])
unique(flights$dest)
unique(flights$origin, flights$dest)
length(unique(flights$dest))
length(unique(flights$origin))
154 * 152
x <- c()
x.append(3)
append(x,3)
x
x <- append(x,3)
x
x <- append(x,4)
x
append(x, c(5,6))
x <- matrix()
x
x.append(c(5,6))
append(x, c(5,6))
x
x <- []
x <- [1;3]
x = [1;3}]
x = [1;3]
x <- matrix()
x
rbind(x, c(4,5))
knitr::opts_chunk$set(echo = TRUE)
unique_pairs <- matrix(ncol=2)
x <- matrix(ncol=2)
x <- rbind(x, c(4,5))
x
x <- x[1,2]
x
x <- matrix(ncol=2)
x <- rbind(x, c(4,5))
x
x <- x[-1,]
x
x <- rbind(x, c(7,8))
for (i in x) {}
for (i in x) {print(i)}
nrow(x)
df_pairs <- data.frame(dest = character(),
origin = character(),
num_flights_Top20 = integer(),
num_delays = integer(),
stringsAsFactors = FALSE)
unique_pairs <- matrix(ncol=2)
for (o in 1:length(origins)) {
for (d in 1:length(dests)) {
unique_pairs <- rbind(unique_pairs, c(o,d))
}
}
Top20_AA <- df[df$airline == "AA", "tail_num"][1:20]
Top20_BA <- df[df$airline == "BA", "tail_num"][1:20]
Bottom10_AA <- na.omit(df[df[order(df$sum_airtime),]$airline == "AA", "tail_num"])[1:10]
Bottom10_BA <- na.omit(df[df[order(df$sum_airtime),]$airline == "BA", "tail_num"])[1:10]
df_dests <- data.frame(dest = character(),
num_flights_Top20 = integer(),
num_flights_all = integer(),
stringsAsFactors = FALSE)
df_origins <- data.frame(origin = character(),
num_flights_Top20 = integer(),
num_flights_all = integer(),
stringsAsFactors = FALSE)
dests <- unique(flights$dest)
for (i in 1:length(dests)) {
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests[i],])
nfa <- nrow(flights[flights$dest == dests[i],])
df_dests <- df_dests %>% add_row(dest=dests[i], num_flights_Top20 = nft20, num_flights_all = nfa)
}
library(tidyverse)
Top20_AA <- df[df$airline == "AA", "tail_num"][1:20]
Top20_BA <- df[df$airline == "BA", "tail_num"][1:20]
Bottom10_AA <- na.omit(df[df[order(df$sum_airtime),]$airline == "AA", "tail_num"])[1:10]
Bottom10_BA <- na.omit(df[df[order(df$sum_airtime),]$airline == "BA", "tail_num"])[1:10]
df_dests <- data.frame(dest = character(),
num_flights_Top20 = integer(),
num_flights_all = integer(),
stringsAsFactors = FALSE)
df_origins <- data.frame(origin = character(),
num_flights_Top20 = integer(),
num_flights_all = integer(),
stringsAsFactors = FALSE)
dests <- unique(flights$dest)
for (i in 1:length(dests)) {
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests[i],])
nfa <- nrow(flights[flights$dest == dests[i],])
df_dests <- df_dests %>% add_row(dest=dests[i], num_flights_Top20 = nft20, num_flights_all = nfa)
}
origins <- unique(flights$origin)
for (i in 1:length(origins)) {
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$origin == origins[i],])
nfa <- nrow(flights[flights$origin == origins[i],])
df_origins <- df_origins %>% add_row(origin=origins[i], num_flights_Top20 = nft20, num_flights_all = nfa)
}
df_dests <- df_dests[order(-df_dests$num_flights_Top20),]
df_origins <- df_origins[order(-df_origins$num_flights_Top20),]
matrix_dest <- as.matrix(df_dests)
matrix_origins <- as.matrix(df_origins)
write.csv(matrix_dest, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/DestsByUtilization.csv")
write.csv(matrix_dest, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/OriginsByUtilization.csv")
df_pairs <- data.frame(dest = character(),
origin = character(),
num_flights_Top20 = integer(),
num_delays = integer(),
stringsAsFactors = FALSE)
unique_pairs <- matrix(ncol=2)
for (o in 1:length(origins)) {
for (d in 1:length(dests)) {
unique_pairs <- rbind(unique_pairs, c(o,d))
}
}
unique_pairs <- unique_pairs[-1,]
for (i in nrow(unique_pairs)) {
origin = unique_pairs[i,1]
dest = unique_pairs[i,2]
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin = origin,])
unique_pairs <- unique_pairs[-1,]
unique_pairs <- matrix(ncol=2)
for (o in 1:length(origins)) {
for (d in 1:length(dests)) {
unique_pairs <- rbind(unique_pairs, c(o,d))
}
}
unique_pairs <- unique_pairs[-1,]
for (i in nrow(unique_pairs)) {
origin <- unique_pairs[i,1]
dest <- unique_pairs[i,2]
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin,])
nd <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin & flights$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest=dest, origin=origin, num_flights_Top20 = nft20, num_delays = nd)
}
df_pairs <- df_pairs[order(-df_pairs$num_flights_Top20),]
df_pairs$pct_delays <- df_pairs$num_delays / df_pairs$num_flights_Top20
matrix_pairs <- as.matrix(df_pairs)
write.csv(matrix_pairs, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/Delays_by_Origin-Dest_Pairs_Top20_AA.csv")
nrow(unique_pairs)
for (i in nrow(unique_pairs)) {
origin <- unique_pairs[i,1]
dest <- unique_pairs[i,2]
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin,])
nd <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin & flights$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest=dest, origin=origin, num_flights_Top20 = nft20, num_delays = nd)
}
unique_pairs
unique_pairs <- matrix(ncol=2)
for (o in 1:length(origins)) {
for (d in 1:length(dests)) {
unique_pairs <- rbind(unique_pairs, c(origins[o],dests[d]))
}
}
unique_pairs <- unique_pairs[-1,]
unique_pairs
for (i in nrow(unique_pairs)) {
origin <- unique_pairs[i,1]
dest <- unique_pairs[i,2]
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin,])
nd <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin & flights$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest=dest, origin=origin, num_flights_Top20 = nft20, num_delays = nd)
}
df_pairs <- df_pairs[order(-df_pairs$num_flights_Top20),]
df_pairs$pct_delays <- df_pairs$num_delays / df_pairs$num_flights_Top20
matrix_pairs <- as.matrix(df_pairs)
write.csv(matrix_pairs, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/Delays_by_Origin-Dest_Pairs_Top20_AA.csv")
unique_pairs[100,1[]]
unique_pairs[100,1]
for (i in nrow(unique_pairs)) {
origin <- unique_pairs[i,1]
dest <- unique_pairs[i,2]
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin,])
nd <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin & flights$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest=dest, origin=origin, num_flights_Top20 = nft20, num_delays = nd)
}
df_pairs <- df_pairs[order(-df_pairs$num_flights_Top20),]
df_pairs$pct_delays <- df_pairs$num_delays / df_pairs$num_flights_Top20
matrix_pairs <- as.matrix(df_pairs)
View(matrix)
View(matrix)
View(matrix_pairs)
View(matrix_pairs)
view(df_pairs)
unique_pairs <- matrix(ncol=2)
for (o in 1:length(origins)) {
for (d in 1:length(dests)) {
unique_pairs <- rbind(unique_pairs, c(origins[o],dests[d]))
}
}
for (o in 1:length(origins)) {
for (d in 1:length(dests)) {
unique_pairs <- rbind(unique_pairs, c(origins[o],dests[d]))
}
}
unique_pairs <- unique_pairs[-1,]
nrow(unique_pairs)
154*152
unique_pairs <- matrix(ncol=2)
nrow(unique_pairs)
length(origins)
length(origins) * length(dests)
for (o in 1:length(origins)) {
for (d in 1:length(dests)) {
unique_pairs <- rbind(unique_pairs, c(origins[o],dests[d]))
}
}
nrow(unique_pairs)
unique_pairs <- unique_pairs[-1,]
for (i in nrow(unique_pairs)) {
origin <- unique_pairs[i,1]
dest <- unique_pairs[i,2]
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin,])
nd <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin & flights$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest=dest, origin=origin, num_flights_Top20 = nft20, num_delays = nd)
}
nrow(df_pairs)
df_pairs <- data.frame(dest = character(),
origin = character(),
num_flights_Top20 = integer(),
num_delays = integer(),
stringsAsFactors = FALSE)
for (i in 1:nrow(unique_pairs)) {
origin <- unique_pairs[i,1]
dest <- unique_pairs[i,2]
nft20 <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin,])
nd <- nrow(flights[flights$tail_num %in% Top20_AA & flights$dest == dests & flights$origin == origin & flights$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest=dest, origin=origin, num_flights_Top20 = nft20, num_delays = nd)
}
library(readxl)
Top_Dest_Origin_pairs_Alpha_ <- read_excel("~/NUS/BT2102/Assignments/3/Top Dest-Origin pairs (Alpha).xlsx")
rm(Top_Dest_Origin_pairs_Alpha_)
Top_Routes <- read_excel("~/NUS/BT2102/Assignments/3/Top Dest-Origin pairs (Alpha).xlsx")
nrow(Top_Routes)
Top_Routes[62,2]
View(Top_Routes)
View(Top_Routes)
flights_by_AA_Top20 <- flights[flights$tail_num %in% Top20_AA,]
nrow(flights_by_AA_Top20)
flights_by_AA_Top20 <- flights[flights$tail_num %in% Top20_AA,]
df_pairs <- data.frame(dest = character(),
origin = character(),
num_flights_Top20 = integer(),
num_delays = integer(),
stringsAsFactors = FALSE)
for (i in 1:nrow(Top_Routes)) {
o <- Top_Routes[i,1]
d <- Top_Routes[i,2]
nft20 <- nrow(flights_by_AA_Top20[flights_by_AA_Top20$dest == d & flights_by_AA_Top20$origin == o,])
nd <- nrow(flights_by_AA_Top20[flights_by_AA_Top20$dest == d & flights_by_AA_Top20$origin == o & flights_by_AA_Top20$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest=dest, origin=origin, num_flights_Top20 = nft20, num_delays = nd)
}
View(df_pairs)
View(df_pairs)
df_pairs <- data.frame(dest = character(),
origin = character(),
num_flights_Top20 = integer(),
num_delays = integer(),
stringsAsFactors = FALSE)
for (i in 1:nrow(Top_Routes)) {
o <- Top_Routes[i,1]
d <- Top_Routes[i,2]
nft20 <- nrow(flights_by_AA_Top20[flights_by_AA_Top20$dest == d & flights_by_AA_Top20$origin == o,])
nd <- nrow(flights_by_AA_Top20[flights_by_AA_Top20$dest == d & flights_by_AA_Top20$origin == o & flights_by_AA_Top20$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest=d, origin=o, num_flights_Top20 = nft20, num_delays = nd)
}
nft20
View(flights_by_AA_Top20)
View(flights_by_AA_Top20)
class(Top_Routes)
Top_Routes[1,2]
o <- Top_Routes[1,2]
o
Top_Routes
as.data.frame(Top_Routes)
for (i in 1:nrow(as.data.frame(Top_Routes))) {
o <- Top_Routes[i,1]
d <- Top_Routes[i,2]
nft20 <- nrow(flights_by_AA_Top20[flights_by_AA_Top20$dest == d & flights_by_AA_Top20$origin == o,])
nd <- nrow(flights_by_AA_Top20[flights_by_AA_Top20$dest == d & flights_by_AA_Top20$origin == o & flights_by_AA_Top20$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest = d, origin = o, num_flights_Top20 = nft20, num_delays = nd)
}
df_pairs <- data.frame(dest = character(),
origin = character(),
num_flights_Top20 = integer(),
num_delays = integer(),
stringsAsFactors = FALSE)
for (i in 1:nrow(as.data.frame(Top_Routes))) {
o <- Top_Routes[i,1]
d <- Top_Routes[i,2]
flights_from_o <- flights_by_AA_Top20[flights_by_AA_Top20$origin == o,]
flights_from_o_to_d <- flights_from_o[flights_from_o$dest == d,]
nft20 <- nrow(flights_from_o_to_d)
nd <- nrow(flights_from_o_to_d[flights_from_o_to_d$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest = d, origin = o, num_flights_Top20 = nft20, num_delays = nd)
}
flights_from_o <- na.omit(flights_by_AA_Top20[flights_by_AA_Top20$origin == o,])
df_pairs <- data.frame(dest = character(),
origin = character(),
num_flights_Top20 = integer(),
num_delays = integer(),
stringsAsFactors = FALSE)
for (i in 1:nrow(as.data.frame(Top_Routes))) {
o <- Top_Routes[i,1]
d <- Top_Routes[i,2]
flights_from_o <- na.omit(flights_by_AA_Top20[flights_by_AA_Top20$origin == o,])
flights_from_o_to_d <- na.omit(flights_from_o[flights_from_o$dest == d,])
nft20 <- nrow(flights_from_o_to_d)
nd <- nrow(flights_from_o_to_d[flights_from_o_to_d$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest = d, origin = o, num_flights_Top20 = nft20, num_delays = nd)
}
class(Top_Routes[1,2])
df_pairs <- data.frame(dest = character(),
origin = character(),
num_flights_Top20 = integer(),
num_delays = integer(),
stringsAsFactors = FALSE)
for (i in 1:nrow(Top_Routes)) {
o <- Top_Routes[i,1]
d <- Top_Routes[i,2]
flights_from_o <- na.omit(flights_by_AA_Top20[flights_by_AA_Top20$origin == o,])
flights_from_o_to_d <- na.omit(flights_from_o[flights_from_o$dest == d,])
nft20 <- nrow(flights_from_o_to_d)
nd <- nrow(flights_from_o_to_d[flights_from_o_to_d$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest = d, origin = o, num_flights_Top20 = nft20, num_delays = nd)
}
for (i in 1:nrow(Top_Routes)) {
o <- Top_Routes[[i,1]]
d <- Top_Routes[[i,2]]
flights_from_o <- na.omit(flights_by_AA_Top20[flights_by_AA_Top20$origin == o,])
flights_from_o_to_d <- na.omit(flights_from_o[flights_from_o$dest == d,])
nft20 <- nrow(flights_from_o_to_d)
nd <- nrow(flights_from_o_to_d[flights_from_o_to_d$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest = d, origin = o, num_flights_Top20 = nft20, num_delays = nd)
}
df_pairs <- df_pairs[order(-df_pairs$num_flights_Top20),]
df_pairs$pct_delays <- df_pairs$num_delays / df_pairs$num_flights_Top20
matrix_pairs <- as.matrix(df_pairs)
write.csv(matrix_pairs, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/Delays_by_Origin-Dest_Pairs_Top20_AA.csv")
View(df_pairs)
flights_by_AA_Top20[flights_by_AA_Top20$origin == o,]
df_pairs <- data.frame(dest = character(),
origin = character(),
num_flights_Top20 = integer(),
num_delays = integer(),
stringsAsFactors = FALSE)
for (i in 1:nrow(Top_Routes)) {
o <- Top_Routes[[i,1]]
d <- Top_Routes[[i,2]]
flights_from_o <- flights_by_AA_Top20[flights_by_AA_Top20$origin == o,]
flights_from_o_to_d <- flights_from_o[flights_from_o$dest == d,]
nft20 <- nrow(flights_from_o_to_d)
nd <- nrow(flights_from_o_to_d[flights_from_o_to_d$arr_delay >= 0,])
df_pairs <- df_pairs %>% add_row(dest = d, origin = o, num_flights_Top20 = nft20, num_delays = nd)
}
df_pairs <- df_pairs[order(-df_pairs$num_flights_Top20),]
df_pairs$pct_delays <- df_pairs$num_delays / df_pairs$num_flights_Top20
matrix_pairs <- as.matrix(df_pairs)
write.csv(matrix_pairs, "~/NUS/BT2102/Assignments/3/clean with R first then Tableau/Delays_by_Origin-Dest_Pairs_Top20_AA.csv")
Top4_Routes <- df_pairs[1:4,]
Top4_Routes
pct_delay_in_Top4_Routes <- sum(df_pairs[df_pairs$Top4_Routes == TRUE,"num_delays"])/sum(df_pairs[df_pairs$Top4_Routes == TRUE,"num_flights_Top20"])
pct_delay_in_Top4_Routes <- sum(df_pairs[df_pairs$Top4_Routes == TRUE,"num_delays"], na.rm=TRUE)/sum(df_pairs[df_pairs$Top4_Routes == TRUE,"num_flights_Top20"], nna.rm = TRUE)
df_pairs[df_pairs$Top4_Routes == TRUE,"num_delays"]
Top4_Routes <- df_pairs[1:4,]
df_pairs$Top4Routes <- ifelse(df_pairs$dest %in% Top4_Routes[,"dest"] & df_pairs$origin %in% Top4_Routes[,"origin"], TRUE, FALSE)
pct_delay_in_Top4_Routes <- sum(df_pairs[df_pairs$Top4_Routes == TRUE,"num_delays"], na.rm=TRUE)/sum(df_pairs[df_pairs$Top4_Routes == TRUE,"num_flights_Top20"], nna.rm = TRUE)
df_pairs[df_pairs$Top4_Routes == TRUE,"num_delays"], na.rm=TRUE)
df_pairs[df_pairs$Top4_Routes == TRUE,"num_delays"]
